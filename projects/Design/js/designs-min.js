window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".gallery");const t=new class{constructor(e){this.slider=document.createElement("div"),this.slider.classList.add(e)}addItem(e){if(e.target.classList.contains("gallery__item")){let t;this.count=1,this.slider.innerHTML="",this.addActions(),this.crossTrigger(),this.galleryImgs=e.target.querySelectorAll(".gallery__img");for(let e=1;e<this.galleryImgs.length;e++)1==e?((t=document.createElement("div")).classList.add("slider__item","slider__item_active"),t.innerHTML=`\n\t\t\t\t\t\t<img src="${this.galleryImgs[e].src}" alt="${this.galleryImgs[e].alt}"\n\t\t\t\t\t\tclass="slider__img">\n\t\t\t\t`,this.slider.querySelector(".slider__arrow-left").classList.add("arrow-hidden")):((t=document.createElement("div")).classList.add("slider__item","emergence-right"),t.innerHTML=`\n\t\t\t\t\t\t<img src="${this.galleryImgs[e].src}" alt="${this.galleryImgs[e].alt}"\n\t\t\t\t\t\tclass="slider__img">\n\t\t\t\t`),this.slider.append(t)}}addCross(){this.cross=document.createElement("div"),this.cross.classList.add("slider__cross"),this.slider.append(this.cross)}crossTrigger(){this.cross.addEventListener("click",this.hideSlider.bind(this))}addArrows(){let e=document.createElement("div");e.classList.add("slider__arrows"),e.innerHTML='\n\t\t\t\t\t<svg data-swipe="left" alt="arrow" class="slider__arrow-left">\n\t\t\t\t\t\t<use xlink:href="images/svg/sprite.svg#pages--designs--icons--arrow_left"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<svg data-swipe="right" alt="arrow" class="slider__arrow-right">\n\t\t\t\t\t\t<use xlink:href="images/svg/sprite.svg#pages--designs--icons--arrow_right"></use>\n\t\t\t\t\t</svg>\n\t\t\t',this.slider.append(e)}addActions(){this.addCross(),this.addArrows(),this.swipeRightDelay=!0,this.swipeLeftDelay=!0,this.swipeRightTrigger(),this.swipeLeftTrigger()}showSlider(e){document.body.append(this.slider),this.addItem(e),function(e="overlay",...t){const s=document.createElement("div"),i=document.body;t.length?s.classList.add(e,...t):s.classList.add(e),i.append(s),i.style.overflow="hidden"}("overlay","overlay_blur")}hideSlider(){this.slider.remove(),function(e=".overlay"){document.querySelector(e).remove(),document.body.style.overflow=""}()}swipeRight(){if(this.count<this.galleryImgs.length-1&&this.swipeRightDelay&&(setTimeout(()=>{this.swipeRightDelay=!0},250),this.swipeRightDelay)){let e=document.querySelector(".slider__item_active"),t=e.nextElementSibling;t.classList.remove("emergence-right"),t.classList.add("slider__item_active"),e.classList.remove("slider__item_active"),e.classList.add("emergence-left"),this.count++,this.count==this.galleryImgs.length-1?(this.slider.querySelector(".slider__arrow-right").classList.add("arrow-hidden"),this.galleryImgs.length-1==2&&this.slider.querySelector(".slider__arrow-left").classList.remove("arrow-hidden")):this.slider.querySelector(".arrow-hidden")&&this.slider.querySelector(".slider__arrow-left").classList.remove("arrow-hidden"),this.swipeRightDelay=!1}}swipeLeft(){if(this.count>1&&this.swipeLeftDelay&&(setTimeout(()=>{this.swipeLeftDelay=!0},250),this.swipeLeftDelay)){let e=document.querySelector(".slider__item_active"),t=e.previousElementSibling;t.classList.remove("emergence-left"),t.classList.add("slider__item_active"),e.classList.remove("slider__item_active"),e.classList.add("emergence-right"),this.count--,1==this.count?(this.slider.querySelector(".slider__arrow-left").classList.add("arrow-hidden"),this.galleryImgs.length-1==2&&this.slider.querySelector(".slider__arrow-right").classList.remove("arrow-hidden")):this.slider.querySelector(".arrow-hidden")&&this.slider.querySelector(".slider__arrow-right").classList.remove("arrow-hidden"),this.swipeLeftDelay=!1}}swipeRightTrigger(){this.slider.querySelector(".slider__arrow-right").addEventListener("click",()=>{this.swipeRight()})}swipeLeftTrigger(){this.slider.querySelector(".slider__arrow-left").addEventListener("click",()=>{this.swipeLeft()})}}("slider");e.addEventListener("click",e=>{e.target.classList.contains("gallery__item")&&t.showSlider(e)}),document.addEventListener("keydown",e=>{"ArrowLeft"===e.code&&document.querySelector(".slider")?t.swipeLeft():"ArrowRight"===e.code&&document.querySelector(".slider")?t.swipeRight():"Escape"===e.code&&document.querySelector(".slider")&&t.hideSlider()});const s=document.documentElement.clientWidth/2;document.addEventListener("touchstart",e=>{document.querySelector(".slider")&&!e.target.classList.contains("slider__cross")&&(e.touches[0].clientX<=s?t.swipeLeft():t.swipeRight())})});